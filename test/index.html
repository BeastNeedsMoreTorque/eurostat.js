<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-queue.v3.min.js"></script>
<script src="https://d3js.org/topojson.v1.min.js"></script>
<script src="https://d3js.org/d3-color.v1.min.js"></script>
<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsonstat@0.13.3/json-stat.js"></script>
<script src="../js/eurostat-tooltip.js"></script>
<script src="../js/eurostat-lib.js"></script>
<script src="../js/eurostat-map.js"></script>

<svg id="map"></svg>

<script>

	//load parameters from URL
	var opts = EstLib.getURLParameters();

	EstLib.map()
	.scale("60M")
	.width(1000)

	.nutsLvl(3).datasetCode("demo_r_d3dens").filters( opts.time? { time : opts.time } : { lastTimePeriod:1 } )
	//.nutsLvl(3).datasetCode("demo_r_pjangrp3").filters({ age:"TOTAL",sex:"T",unit:"NR", time : 2016 })
	//.nutsLvl(3).datasetCode("ilc_li41").filters( { unit:"PC", time:2015 } )
	//.nutsLvl(3).datasetCode("crim_gen_reg").filters( { unit:"NR", time:2010, iccs:"ICCS0101" } )
	//.nutsLvl(2).datasetCode("lfst_r_lfu3rt").filters( { unit:"PC", lastTimePeriod:1, sex:"T", age:"Y_GE15" } )

	//.unitText("unit")
	//.colorFun(d3.interpolateGnBu)
	.clnb(9)
	.drawCoastalMargin(false)
	//.filtersDefinitionFun(EstLib.getFillPatternDefinitionFun({ patternSize: 5, minSize: 1, maxSize: 5.5, shape: "circle", bckColor: "white", symbColor: "black" } ))
	//.classToFillStyle(EstLib.getFillPatternLegend())
	//.type("ps")
	//.psMaxSize(50)
	//.legendBoxHeight(250)
	//.legendBoxWidth(200)
	//.legendLabelWrap(200)
	//.classifMethod("threshold") //quantile equinter threshold
	//.threshold([30,50,75,100,150,300,850,1500])
	//.legendLabelDecNb(0)
	.set(opts)
	.build();

</script>
